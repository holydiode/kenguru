@model Kenguru_four_.Models.IndexViewModel
@using Kenguru_four_.Models
@using Kenguru_four_.htmlHelpers


<div class="sorting">
            @Html.ActionLink(CatalogHelper.GetParametrName(Model.SortBy), "Index", CatalogHelper.NewValues(Model, sortBy:(Model.SortBy)% 2 + 1),  new { @class = "parametr parametr-first" })
            @Html.ActionLink(CatalogHelper.GetParametrPrice(Model.SortBy), "Index", CatalogHelper.NewValues(Model, sortBy:(Model.SortBy%10)% 2 + 11),  new { @class = "parametr" })
            @Html.ActionLink(CatalogHelper.GetParametrCount(Model.SortBy), "Index", CatalogHelper.NewValues(Model, sortBy:(Model.SortBy%20)% 2 + 21),  new { @class = "parametr" })
            @Html.ActionLink(CatalogHelper.GetParametrRating(Model.SortBy), "Index", CatalogHelper.NewValues(Model, sortBy:(Model.SortBy%30)% 2 + 31),  new { @class = "parametr" })
       
</div>
<div class="glass-case">
    @if (Model != null)
    {
        foreach (Good curent in Model.Goods)
        {
            <div class="goods">

                @{
                    string filePath = Url.Content("~/UploadFiles/" + curent.id + "/main.png");
                }
                <div class="goods-field goods-intro goods-col" style="background-image: url(@filePath); ">
                </div>
                <div class="goods-right goods-col">
                    <div class="goods-info goods-field goods-line">
                        <div class="goods-info-title">@curent.title</div>
                        <div class="goods-info-short">@curent.short_discribe</div>
                    </div>
                    <div class="goods-line" style="display:flex; flex-flow:row;">
                        <div class="goods-price goods-field">Цена: @curent.price</div>
                        <div class="goods-seller goods-field">
                            @if (curent.seller != null)
                            {
                            Продавец:<a> @curent.seller.name </a>
                        }
                        </div>
                    </div>

                </div>
                <div class="goods-buttons goods-col">
                    <a href="~/Good/Index/@curent.id" class="button-main button-sell">
                        Подробнее
                    </a>
                    <!--создает форму, отправка которой добавляет список в корзину-->
                    @using (Html.BeginForm("AddToCart", "Cart"))
                    {
                        @Html.Hidden("id", curent.id)
                        @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                        <input type="submit" class="button-main button-sell" value="В корзину">

                    }
                </div>


            </div>

        }
        <div class="btn-group text-center">

            @Html.PageLinks(Model.PageInfo, x => Url.Action("Index", new { page = x }))
        </div>
    }
</div>